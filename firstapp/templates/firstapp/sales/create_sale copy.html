<!DOCTYPE html>
<html>

<head>
  <title>Submit JSON Form</title>

  <!-- Include jQuery library -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Include jQuery Validation Plugin -->
  <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
  <!-- Include Alpine.js library -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body>

  <h1>Submit JSON Form</h1>
  <div x-data="jsonDataForm()">
    <form @submit="submitForm">
      <label for="phone">Phone:</label>
      <input type="text" id="phone" name="phone" x-model="formData.phone" required><br>

      <label for="date">Date:</label>
      <input type="date" id="date" name="date" x-model="formData.date" required><br>

      <label for="status">Status:</label>
      <input type="number" id="status" name="status" x-model="formData.status" required><br>

      <label for="payment_status">Payment Status:</label>
      <input type="number" id="payment_status" name="payment_status" x-model="formData.payment_status" required><br>

      <label for="total_quantity">Total Quantity:</label>
      <input type="number" id="total_quantity" name="total_quantity" x-model="formData.total_quantity" required><br>

      <label for="total">Total:</label>
      <input type="number" step="0.01" id="total" name="total" x-model="formData.total" required><br>

      <label for="discount">Discount:</label>
      <input type="number" step="0.01" id="discount" name="discount" x-model="formData.discount" required><br>

      <label for="shipping_cost">Shipping Cost:</label>
      <input type="number" step="0.01" id="shipping_cost" name="shipping_cost" x-model="formData.shipping_cost"
        required><br>

      <label for="grand_total">Grand Total:</label>
      <input type="number" step="0.01" id="grand_total" name="grand_total" x-model="formData.grand_total" required><br>

      <label for="paid">Paid:</label>
      <input type="number" step="0.01" id="paid" name="paid" x-model="formData.paid" required><br>

      <label for="due">Due:</label>
      <input type="number" step="0.01" id="due" name="due" x-model="formData.due" required><br>

      <label for="note">Note:</label>
      <textarea id="note" name="note" x-model="formData.note"></textarea><br>

      <label for="customer">Customer:</label>
      <input type="number" id="customer" name="customer" x-model="formData.customer" required><br>

      <hr>

      <label for="sale_order_product">Sale Order Products:</label>
      <template x-for="(product, index) in saleOrderProducts" :key="index">
        <div>
          <label for="quantity">Quantity:</label>
          <input type="number" x-model="product.quantity" required><br>
          <label for="product">Product:</label>
          <input type="number" x-model="product.product" required><br>
          <label for="sub_total">Sub Total:</label>
          <input type="number" step="0.01" x-model="product.sub_total" required><br>
          <br>
        </div>
      </template>
      <button type="button" @click="addProductField">Add Product</button><br>

      <button type="submit">Submit JSON</button>
    </form>
  </div>

  <script>
    function jsonDataForm() {
      return {
        formData: {
          phone: null,
          date: null,
          status: null,
          payment_status: null,
          total_quantity: null,
          total: null,
          discount: null,
          shipping_cost: null,
          grand_total: null,
          paid: null,
          due: null,
          note: null,
          customer: null,
        },
        saleOrderProducts: [],

        addProductField() {
          this.saleOrderProducts.push({ quantity: null, product: null, sub_total: null });
        },

        submitForm(e) {
          e.preventDefault();
          const formData = { ...this.formData };
          formData.sale_order_product = this.saleOrderProducts;
          console.log(JSON.stringify(formData));

          // Replace 'YOUR_API_URL' with your actual API endpoint URL
          // fetch('http://127.0.0.1:8000/api/sales/create/', {
          //   method: 'POST',
          //   body: JSON.stringify(formData),
          //   headers: {
          //     'Content-Type': 'application/json',
          //   },
          // })
          //   .then((response) => response.json())
          //   .then((data) => {
          //     console.log('Successfully submitted:', data);
          //   })
          //   .catch((error) => {
          //     console.error('Error submitting form:', error);
          //   });
        },



      };
    }



  </script>

</body>

</html>